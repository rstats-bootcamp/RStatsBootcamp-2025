---
title: "14 R Markdown"
---

::: callout-note
## Learning Objectives

By the end of this lesson, you will be able to:

-   Understand the basics of R Markdown
-   Create documents that combine code, output, and narrative text
-   Format text using Markdown syntax
-   Generate reports in multiple formats (HTML, PDF, Word)
-   Use R Markdown for reproducible data analysis
:::

## What is R Markdown?

R Markdown is a file format that allows you to combine R code, its output, and narrative text in a single document. It's a powerful tool for creating reproducible reports, presentations, dashboards, and even websites.

::: callout-important
## Key Concept

R Markdown documents are plain text files that contain three important elements: 1. **YAML header** - Document metadata and formatting options 2. **Markdown text** - For narrative content 3. **Code chunks** - R code that can be executed
:::

## Getting Started with R Markdown

To create an R Markdown document in RStudio:

1.  Click **File → New File → R Markdown**
2.  Choose a document type (HTML, PDF, or Word)
3.  Give your document a title and author name
4.  Click **OK**

This will generate a template R Markdown file that you can modify.

## YAML Header

The YAML header appears at the top of the document between triple dashes (`---`):

``` yaml
---
title: "My Analysis Report"
author: "Your Name"
date: "2023-06-15"
output: html_document
---
```

You can customize various aspects of your document by adding options to the YAML header:

``` yaml
---
title: "My Analysis Report"
author: "Your Name"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    highlight: tango
    code_folding: show
---
```

## Markdown Text

Markdown is a lightweight markup language that allows you to format text using simple syntax:

### Basic Formatting

``` markdown
# Heading 1
## Heading 2
### Heading 3

**Bold text**
*Italic text*
~~Strikethrough~~

[Link text](https://example.com)
![Image alt text](path/to/image.png)
```

### Lists

``` markdown
Unordered list:
- Item 1
- Item 2
  - Subitem 2.1
  - Subitem 2.2

Ordered list:
1. First item
2. Second item
   a. Subitem a
   b. Subitem b
```

### Tables

``` markdown
| Column 1 | Column 2 | Column 3 |
|----------|----------|----------|
| Row 1    | Data     | Data     |
| Row 2    | Data     | Data     |
```

## Code Chunks

Code chunks in R Markdown allow you to execute R code and display its results:

```` markdown
```{r chunk-name, options}
# Your R code here
```
````

For example:

```` markdown
```{r summary-stats}
# Load data
data(mtcars)

# Calculate summary statistics
summary(mtcars)
```
````

### Chunk Options

You can control how code chunks behave using options:

| Option               | Description                            |
|----------------------|----------------------------------------|
| `eval=TRUE/FALSE`    | Whether to evaluate the code           |
| `echo=TRUE/FALSE`    | Whether to show the code               |
| `include=TRUE/FALSE` | Whether to include the chunk in output |
| `message=TRUE/FALSE` | Whether to display messages            |
| `warning=TRUE/FALSE` | Whether to display warnings            |
| `fig.width=7`        | Figure width in inches                 |
| `fig.height=5`       | Figure height in inches                |

Example:

```` markdown
```{r plot, fig.width=8, fig.height=4, echo=FALSE}
# Create a plot without showing the code
plot(mtcars$wt, mtcars$mpg, 
     main="Car Weight vs. Mileage",
     xlab="Weight (1000 lbs)",
     ylab="Miles Per Gallon",
     pch=19, col="blue")
```
````

## Inline Code

You can also include R code directly within text using backticks and `r`:

``` markdown
The average miles per gallon is `r mean(mtcars$mpg)`.
```

This will calculate the mean and insert the result directly into your text.

## Generating Reports

To generate your report:

1.  Click the **Knit** button in RStudio
2.  Choose your desired output format
3.  View the generated document

R Markdown will: - Run all the code chunks - Generate all outputs (tables, plots, etc.) - Format the text according to Markdown syntax - Combine everything into a single document

## Example: Data Analysis Report

Here's a simple example of an R Markdown document for data analysis:

```` markdown
---
title: "Car Performance Analysis"
author: "Data Scientist"
date: "`r Sys.Date()`"
output: html_document
---

## Introduction

This report analyzes the relationship between car characteristics and fuel efficiency.

## Data Overview

```{r data-summary}
# Load the mtcars dataset
data(mtcars)

# Display the first few rows
head(mtcars)

# Summary statistics
summary(mtcars[, c("mpg", "wt", "hp")])
```

## Visualization

```{r visualization, fig.width=10, fig.height=5}
# Create a scatterplot
plot(mtcars$wt, mtcars$mpg, 
     main="Car Weight vs. Mileage",
     xlab="Weight (1000 lbs)",
     ylab="Miles Per Gallon",
     pch=19, col="blue")

# Add a regression line
abline(lm(mpg ~ wt, data = mtcars), col = "red", lwd = 2)
```

## Statistical Analysis

```{r regression}
# Fit a linear model
model <- lm(mpg ~ wt + hp, data = mtcars)

# Display model summary
summary(model)
```

## Conclusion

Based on our analysis, there is a significant negative relationship between car weight and fuel efficiency. For every 1,000 lb increase in weight, the miles per gallon decreases by approximately `r abs(round(coef(model)[2], 2))` units.
````

## Exercises

::: {.callout-note appearance="minimal"}
### Exercise 1

Create a new R Markdown document that includes: - A title and your name - A brief introduction - A code chunk that loads and summarizes a dataset of your choice - A visualization of the data - A brief conclusion

### Exercise 2

Experiment with different output formats (HTML, PDF, Word) and observe the differences.

### Exercise 3

Create an R Markdown document with a table of contents, code folding, and a custom theme.
:::

## Next Steps

In the next lesson, we'll explore Git and GitHub as tools for version control and collaboration in data science projects.

## Additional Resources

-   [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)
-   [R Markdown Cheat Sheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf)
-   [R Markdown Cookbook](https://bookdown.org/yihui/rmarkdown-cookbook/)