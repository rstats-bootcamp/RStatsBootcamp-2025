<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>06 Data subsetting – R Stats Bootcamp</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./img/rstats-logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dee922831e13d8617d658465dd4567ee.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-927edb3cde42616945691bbf0360b549.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dee922831e13d8617d658465dd4567ee.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d3f643744f9b4317ace29245be434518.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-fb58e920a50b525cf6b339435faaa4fb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-d3f643744f9b4317ace29245be434518.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar docked nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./img/rstats-logo.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Stats Bootcamp</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-setup.html">Module 1: R Foundations</a></li><li class="breadcrumb-item"><a href="./06-data-manipulation.html">06 Data subsetting</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Stats Bootcamp</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the Bootcamp</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Module 1: R Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 Setup &amp; intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-r-lang.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 R language</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 R Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 Data objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-data-frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 Data frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-data-manipulation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">06 Data subsetting</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Module 2: Statistical Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-question-explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07 Explore data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-sampling-dist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">08 Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">09 Correlation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10 Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-t-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11 T-test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-1-way-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12 ANOVA</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Module 3: Reproducible Research</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-reproducibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">13 Reproducibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">14 R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-github-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">15 Git and GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-collaborative-workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">16 Collaboration</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#subsetting-and-manipulation-data-sumo" id="toc-subsetting-and-manipulation-data-sumo" class="nav-link active" data-scroll-target="#subsetting-and-manipulation-data-sumo">1 Subsetting and Manipulation (data sumo)</a></li>
  <li>
<a href="#indexing-concept" id="toc-indexing-concept" class="nav-link" data-scroll-target="#indexing-concept">2 Indexing concept</a>
  <ul class="collapse">
<li><a href="#how-indexing-works" id="toc-how-indexing-works" class="nav-link" data-scroll-target="#how-indexing-works">2.1 How indexing works</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">2.2 Vectors</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">2.3 Matrices</a></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays">2.4 Arrays</a></li>
  </ul>
</li>
  <li><a href="#which-and-subsetting" id="toc-which-and-subsetting" class="nav-link" data-scroll-target="#which-and-subsetting">3 <code>which()</code> and subsetting</a></li>
  <li>
<a href="#selection-on-data.frame-objects" id="toc-selection-on-data.frame-objects" class="nav-link" data-scroll-target="#selection-on-data.frame-objects">4 Selection on <code>data.frame</code> objects</a>
  <ul class="collapse">
<li><a href="#orchardsprays-data" id="toc-orchardsprays-data" class="nav-link" data-scroll-target="#orchardsprays-data">4.1 <code>OrchardSprays</code> data</a></li>
  <li><a href="#practice-selecting-parts-a-data-frame" id="toc-practice-selecting-parts-a-data-frame" class="nav-link" data-scroll-target="#practice-selecting-parts-a-data-frame">4.2 Practice selecting parts a data frame</a></li>
  <li><a href="#selection-based-on-more-than-one-variable-value" id="toc-selection-based-on-more-than-one-variable-value" class="nav-link" data-scroll-target="#selection-based-on-more-than-one-variable-value">4.3 Selection based on more than one variable value</a></li>
  </ul>
</li>
  <li><a href="#aggregate-function" id="toc-aggregate-function" class="nav-link" data-scroll-target="#aggregate-function">5 <code>aggregate()</code> function</a></li>
  <li>
<a href="#practice-exercises" id="toc-practice-exercises" class="nav-link" data-scroll-target="#practice-exercises">6 Practice exercises</a>
  <ul class="collapse">
<li><a href="#mean-for-subset" id="toc-mean-for-subset" class="nav-link" data-scroll-target="#mean-for-subset">6.1 Mean for Subset</a></li>
  <li><a href="#height-categories" id="toc-height-categories" class="nav-link" data-scroll-target="#height-categories">6.2 Height Categories</a></li>
  <li><a href="#aggregate-by-group" id="toc-aggregate-by-group" class="nav-link" data-scroll-target="#aggregate-by-group">6.3 Aggregate by Group</a></li>
  <li><a href="#boolean-selection" id="toc-boolean-selection" class="nav-link" data-scroll-target="#boolean-selection">6.4 Boolean Selection</a></li>
  <li><a href="#na-in-aggregation" id="toc-na-in-aggregation" class="nav-link" data-scroll-target="#na-in-aggregation">6.5 NA in Aggregation</a></li>
  <li><a href="#iris-dataset-question" id="toc-iris-dataset-question" class="nav-link" data-scroll-target="#iris-dataset-question">6.6 Iris Dataset Question</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-setup.html">Module 1: R Foundations</a></li><li class="breadcrumb-item"><a href="./06-data-manipulation.html">06 Data subsetting</a></li></ol></nav><div class="quarto-title">
<h1 class="title">06 Data subsetting</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/sumo.png" class="img-fluid figure-img"></p>
<figcaption>Command data and you are powerful</figcaption></figure>
</div>
</center>
<section id="subsetting-and-manipulation-data-sumo" class="level2"><h2 class="anchored" data-anchor-id="subsetting-and-manipulation-data-sumo">1 Subsetting and Manipulation (data sumo)</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning Objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of this lesson, you will be able to:</p>
<ul>
<li>Describe the indexing concept for vectors and matrices</li>
<li>Use the <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> function to subset data</li>
<li>Select parts of a data frame</li>
<li>Use the <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> function to summarize data</li>
</ul>
</div>
</div>
<p><br></p>
<blockquote class="blockquote">
<p>With a good basic set of moves for subsetting and manipulating data, you can overpower any dataset no matter how large and powerful they may be. Then, you will have strong data Sumo.</p>
</blockquote>
<p>Subsetting and manipulating data is probably the commonest activity for anyone who works with data. This is a core activity for exploratory data analysis, but is also extensively used in simple data acquisition, analysis and graphing, while also being related to more general data manipulating activities, for example database queries. This page is an introduction to the core syntax and some of the tools for manipulating and subsetting data in R.</p>
<p><br></p>
</section><section id="indexing-concept" class="level2"><h2 class="anchored" data-anchor-id="indexing-concept">2 Indexing concept</h2>
<blockquote class="blockquote">
<p>If you would like to slice and dice your data, you will need to learn all about indexing!</p>
</blockquote>
<p>The basics of the indexing concept in <code>R</code> syntax is very simple, where data storage objects like <strong>vectors</strong> (1 dimension), <strong>matrices</strong> (2 dimensions) and <strong>arrays</strong> (3 or more dimensions) store individual data values that can be accessed by the “address” of the dimension(s).</p>
<p><br></p>
<section id="how-indexing-works" class="level3"><h3 class="anchored" data-anchor-id="how-indexing-works">2.1 How indexing works</h3>
<p>Say you have a numeric vector called <code>my_vector</code> that has 10 values. The index values will be <code>1</code> to <code>10</code>, with each value corresponding consecutively to the data value at that position.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">11.3</span>, <span class="fl">11.2</span>, <span class="fl">10.4</span>, <span class="fl">10.4</span>, <span class="fl">8.7</span>, </span>
<span>               <span class="fl">10.8</span>, <span class="fl">10.5</span>, <span class="fl">10.3</span>, <span class="fl">9.7</span>, <span class="fl">11.2</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">my_vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>[1] 11.3 11.2 10.4 10.4 8.7 10.8 10.5 10.3  9.7 11.2</code></pre>
<p><br></p>
<p>Notice the <code>[1]</code> in the R console output? This indicates the index of value right next to it and the R system will provide an index value for longer vectors as the wrap in the console. If we could see the actual index values it would look something like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> my_vector</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">11.3</span> <span class="fl">11.2</span> <span class="fl">10.4</span> <span class="fl">10.4</span>  <span class="fl">8.7</span> <span class="fl">10.8</span> <span class="fl">10.5</span> <span class="fl">10.3</span>  <span class="fl">9.7</span> <span class="fl">11.2</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     ^    ^    ^    ^    ^    ^    ^    ^    ^    ^</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     1    2    3    4    5    6    7    8    9    10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="vectors" class="level3"><h3 class="anchored" data-anchor-id="vectors">2.2 Vectors</h3>
<p>You can create vector subsets by manipulating the index. Vector objects have indices in 1 dimension. For example, <code>my_vector[1:i]</code>, where <code>i</code> is the length of the vector.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Vectors ####</span></span>
<span><span class="co"># Try this</span></span>
<span></span>
<span><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">11.3</span>, <span class="fl">11.2</span>, <span class="fl">10.4</span>, <span class="fl">10.4</span>, </span>
<span>               <span class="fl">8.7</span>, <span class="fl">10.8</span>, <span class="fl">10.5</span>, <span class="fl">10.3</span>, <span class="fl">9.7</span>, <span class="fl">11.2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return all values</span></span>
<span><span class="va">my_vector</span>        <span class="co"># Typical way</span></span>
<span><span class="va">my_vector</span><span class="op">[</span> <span class="op">]</span>     <span class="co"># Blank index implies all index values</span></span>
<span><span class="va">my_vector</span><span class="op">[</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="co"># Returns all index values explicitly</span></span>
<span></span>
<span><span class="co"># Return the first 3 values</span></span>
<span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="co"># Reminder of the function of the colon operator ":"</span></span>
<span><span class="va">my_vector</span><span class="op">[</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="co"># Notice consecutive indices can use the ":" operator</span></span>
<span></span>
<span><span class="co"># Return 5th and 9th values</span></span>
<span><span class="va">my_vector</span><span class="op">[</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">9</span><span class="op">)</span><span class="op">]</span> <span class="co"># Notice we have to place non-consecutive index values in the c() function</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="matrices" class="level3"><h3 class="anchored" data-anchor-id="matrices">2.3 Matrices</h3>
<p>Matrix objects have 2 dimensions denoted as <code>my_matrix[1:i, 1:j]</code>, where <code>i</code> is the number of rows and <code>j</code> is the number of columns.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Matrices ####</span></span>
<span><span class="co"># Try this</span></span>
<span></span>
<span><span class="va">my_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">6</span>,<span class="fl">6</span>,<span class="fl">6</span><span class="op">)</span>,</span>
<span>                    nrow <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_matrix</span> <span class="co"># notice how the arguments arranged the data</span></span>
<span></span>
<span><span class="co"># Flash challenge: make a matrix with the same data vector above to look like...</span></span>
<span><span class="co">#      [,1] [,2]</span></span>
<span><span class="co"># [1,]    2    6</span></span>
<span><span class="co"># [2,]    3    6</span></span>
<span><span class="co"># [3,]    4    6</span></span>
<span><span class="co"># [4,]    5    6</span></span>
<span></span>
<span><span class="co"># "Slicing" out a row or column</span></span>
<span><span class="va">my_matrix</span><span class="op">[</span><span class="fl">1</span>,  <span class="op">]</span> <span class="co"># Slice out row 1</span></span>
<span><span class="va">my_matric</span><span class="op">[</span> , <span class="fl">3</span><span class="op">]</span> <span class="co"># Slice out column 3</span></span>
<span></span>
<span><span class="co"># Matrix columns and rows often have names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">)</span> <span class="co"># No names yet</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">)</span> <span class="co"># Returns number of rows (useful for large matrices)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">)</span> <span class="co"># No row names; 2 rows, need two names</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dogs"</span>, <span class="st">"cats"</span><span class="op">)</span></span>
<span><span class="va">my_matrix</span> <span class="co"># Now the rows have names!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">)</span> <span class="co"># Get them this way too!</span></span>
<span></span>
<span><span class="co"># Flash challenge: Name the columns of my_matrix "a", "b", "c", "d" with colnames()</span></span>
<span></span>
<span><span class="va">my_matrix</span></span>
<span></span>
<span><span class="co"># Should look like this:</span></span>
<span><span class="co">#      a b c d</span></span>
<span><span class="co"># dogs 2 3 4 5</span></span>
<span><span class="co"># cats 6 6 6 6</span></span>
<span></span>
<span><span class="co"># You can also slice out matrix portions by name</span></span>
<span><span class="va">my_matrix</span><span class="op">[</span><span class="st">"dogs"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"b"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Finally, functions act on values, not the index</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">my_matrix</span><span class="op">[</span><span class="st">"dogs"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"b"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="arrays" class="level3"><h3 class="anchored" data-anchor-id="arrays">2.4 Arrays</h3>
<p>Arrays are data objects with more than 2 dimensions (well, technically a matrix with 2 dimensions is also an array, but let’s ignore that for now). Array dimensions are denoted as <code>my_array[1:i, 1:j, 1:k]</code>, where <code>i</code> is the number of rows and <code>j</code> the columns and <code>k</code> the “depth” of <code>i * j</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/1.5-array.png" class="img-fluid figure-img"></p>
<figcaption>my_array</figcaption></figure>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Arrays ####</span></span>
<span><span class="co"># Try this</span></span>
<span></span>
<span><span class="co"># help(runif)</span></span>
<span><span class="co"># help(round)</span></span>
<span><span class="co"># Try it to see what it does... </span></span>
<span><span class="va">my_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">27</span>, min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">my_vec</span> <span class="co"># See what we did there?</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">my_vec</span><span class="op">)</span> <span class="co"># Just checking</span></span>
<span></span>
<span><span class="va">my_array</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_vec</span>,</span>
<span>                  dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">my_array</span></span>
<span></span>
<span><span class="co"># Flash challenge: </span></span>
<span><span class="co"># Specify and print the 1st and 3rd  slice of the k dimension of my_array</span></span>
<span><span class="co"># Assuming my_array has dimensions i, j, k like my_array[i,j,k]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section></section><section id="which-and-subsetting" class="level2"><h2 class="anchored" data-anchor-id="which-and-subsetting">3 <code>which()</code> and subsetting</h2>
<p>Subsetting data objects is done by exploiting the index system. We usually do this by either specifying index values explicitly (effective, but it requires that you know A LOT about the data object), or by constructing <em>queries</em> that choose subset of data based on particular values. The <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> function is a powerful way to construct queries.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Try this</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">which</span><span class="op">)</span> <span class="co"># Notice how the x argument is required to be a LOGICAL vector?</span></span>
<span></span>
<span><span class="co"># Make a NUMERIC vector</span></span>
<span><span class="va">vector_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a boolean phrase to ask which elements of vector_a are greater than 5</span></span>
<span><span class="va">vector_a</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="co"># Interesting... it is a LOGICAL vector!</span></span>
<span></span>
<span><span class="co"># which() will return the index values of TRUE values</span></span>
<span><span class="co"># In other words, WHICH values in vector_a are greater than 5?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">vector_a</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<p>What is the point of all this? <strong>THE POINT</strong> is to be able to use expressions to obtain indices and values in data structures…</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># What VALUES in vector_a are &gt; 5?</span></span>
<span><span class="va">vector_a</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">vector_a</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># This also works on vectors of other types</span></span>
<span><span class="co"># Consider a character vector</span></span>
<span><span class="va">char_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"maize"</span>, <span class="st">"wheat"</span>, <span class="st">"maize"</span>, <span class="st">"wheat"</span>, <span class="st">"wheat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Which elements are equivalent to "wheat"?</span></span>
<span><span class="va">char_vec</span> <span class="op">==</span> <span class="st">"wheat"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">char_vec</span> <span class="op">==</span> <span class="st">"wheat"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">char_vec</span><span class="op">[</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">char_vec</span> <span class="op">==</span> <span class="st">"wheat"</span><span class="op">)</span><span class="op">]</span> <span class="co"># This works</span></span>
<span><span class="va">char_vec</span><span class="op">[</span> <span class="va">char_vec</span> <span class="op">==</span> <span class="st">"wheat"</span><span class="op">]</span>        <span class="co"># Same output</span></span>
<span></span>
<span><span class="co"># Flash challenge: Explain in your own words why </span></span>
<span><span class="co"># the previous 2 lines of code have identical output?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<p>We are just beginning to scratch the surface of possibilities with the <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> function. Keep this function in mind and practice it when you can.</p>
<p><br></p>
</section><section id="selection-on-data.frame-objects" class="level2"><h2 class="anchored" data-anchor-id="selection-on-data.frame-objects">4 Selection on <code>data.frame</code> objects</h2>
<blockquote class="blockquote">
<p>Data frames are the ultimate data object for getting, storing, organizing and analyzing data. A good scientist must learn to communicate the subtlety of data. A good statistician must learn not to underestimate the subtletly of data. A good student must learn that</p>
</blockquote>
<p><strong>subtlety may exist, even in simple data</strong>.</p>
<p>There are a couple of data object types that have a special characteristic in that they store data of different types, where vectors, matrices and arrays can only store one type of data (e.g., numeric, character, logical, etc.). The special data objects that can contain multiple data types are list objects, and data frames. Here we will focus on data frames.</p>
<p><strong>Data frames can have different vector types arranged by column</strong> but there is a constraint that each vector must be the same length, that is, <strong>each ROW is considered an observation for each variable value</strong> (though there may be missing data coded by <code>NA</code>).</p>
<p>There are a few ways to think about selecting values in a data frame. The first is simply to access values through the variable names, which can either be done by using the data frame name with the <code>$</code> operator and the variable name, or by using the <code>[ , ]</code> syntax with either the variable name or the column number of the variable of interest <a href="https://rstats-bootcamp.github.io/website/5-data-frames.html#the-index-operator">see here</a>.</p>
<p>A second powerful way to access variables in a data frame is by selecting particular rows of a data frame. This may be done by selecting the rows of a data based on values of one or more variables. We will practice doing this using <code><a href="https://rdrr.io/r/base/which.html">which()</a></code>, the <code>[ , ]</code> syntax, and boolean phrases is the following code block.</p>
<p>For the following section, we will use the <code>OrchardSprays</code> dataset that exists as a data frame in the in-built <code>{datasets}</code> package. You can use <code><a href="https://rdrr.io/r/datasets/OrchardSprays.html">help(OrchardSprays)</a></code> to see the help page (the help page is characteristically terse, so some description is given here).</p>
<p><br></p>
<section id="orchardsprays-data" class="level3"><h3 class="anchored" data-anchor-id="orchardsprays-data">4.1 <code>OrchardSprays</code> data</h3>
<p>This is a classic dataset based on <a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1744-7348.1943.tb06173.x">an experiment looking at how a chemical additive could be used to deter honeybees from being attracted to crops and subsequently killed by pesticides</a>.</p>
<p>The experiment involved having a <code>treatment</code> consisting of adding a “lime sulfur emulsion” (honeybee deterrent) in increasing concentrations to a sucrose solution. <strong>The <code>treatment</code> variable</strong> had 8 levels including a control (no deterrent) and 7 other levels with increasing concentration of the deterrent. The treatment levels were named A (the highest amount of deterrent), B (second highest deterrent) through to G (lowest deterrent) and H (control - no deterrent) <strong>The <code>decrease</code> variable</strong> was a measure of the quantity of sucrose solution that was taken by honeybees (the prediction here is that higher concentrations of the deterrent should result in a lower decrease in the sucrose solution).</p>
<p>The experiment involved a <a href="https://en.wikipedia.org/wiki/Latin_square">Latin Square</a> design, with the order of the 8 treatments arranged randomly in an array of 8 columns (the purpose of this design is to randomize any effect of the <code>treatment</code> ORDER or POSITION on the response variable). This resulted in an 8 row by 8 column experiment. The response was measured after placing 100 honeybees into an experimental chamber with the 64 containers of sucrose solution.</p>
<p><br></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## OrchardSprays ####</span></span>
<span><span class="co">## Understand the data - an important step</span></span>
<span></span>
<span><span class="co"># Try this</span></span>
<span><span class="co"># Load the OrchardSpray data using the data() function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">)</span> <span class="co"># Should see OrchardSprays &lt;promise&gt; in the Global Env.</span></span>
<span></span>
<span><span class="co"># Look at the data head()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">)</span> <span class="co"># First 6 rows</span></span>
<span></span>
<span><span class="co"># Look at variable types with str()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">str</span><span class="op">)</span> <span class="co"># Good function to see info about data object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># First let's just look at the data</span></span>
<span><span class="co"># Don't worry too much about the code for these graphs if you have not encountered it before</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">decrease</span> <span class="op">~</span> <span class="va">treatment</span>, data <span class="op">=</span> <span class="va">OrchardSprays</span>, </span>
<span>        main <span class="op">=</span> <span class="st">"The pattern fits the prediction"</span>,</span>
<span>        ylab <span class="op">=</span> <span class="st">"Amount of sucrose consumed"</span>,</span>
<span>        xlab <span class="op">=</span> <span class="st">"Lime sulpher treatment amount in decreasing order (H = control)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This is the experimental design</span></span>
<span><span class="co"># Latin Square is kind of like Sudoku</span></span>
<span><span class="co"># No treatment can be in row or column more than once</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">colpos</span>,  <span class="co"># NB use of $ syntax to access data</span></span>
<span>     y <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span>, </span>
<span>     pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">9</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">9</span><span class="op">)</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"The Latin Square design of treatments"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"\"Column\" position"</span>,</span>
<span>     ylab <span class="op">=</span> <span class="st">"\"Row\" position"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="practice-selecting-parts-a-data-frame" class="level3"><h3 class="anchored" data-anchor-id="practice-selecting-parts-a-data-frame">4.2 Practice selecting parts a data frame</h3>
<p>Selecting particular parts of a data frame based on the values of <strong>one variable</strong> is a common and extremely useful task.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Practice selecting parts a data frame ####</span></span>
<span></span>
<span><span class="co"># Select the rows of the dataset for treatment "D"</span></span>
<span></span>
<span><span class="co"># (Pseudocode steps to solve) </span></span>
<span><span class="co"># Break it down to make small steps easy to read</span></span>
<span></span>
<span><span class="co"># 01 Boolean phrase to identify rows where treatment value is "D"</span></span>
<span><span class="co"># 02 which() to obtain index of TRUE in boolean vector</span></span>
<span><span class="co"># 03 Exploit [ , ] syntax with data frame object to slice out rows</span></span>
<span></span>
<span><span class="co"># 01 Boolean phrase</span></span>
<span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="co"># Just print variable to compare visually to boolean</span></span>
<span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"D"</span> <span class="co"># logical vector - TRUE in "D" positions</span></span>
<span></span>
<span><span class="co"># 02 which()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"D"</span><span class="op">)</span> <span class="co"># Index of TRUE values</span></span>
<span><span class="va">my_selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"D"</span><span class="op">)</span> <span class="co"># Place index in a variable</span></span>
<span><span class="va">my_selection</span> <span class="co"># Just checking</span></span>
<span></span>
<span><span class="co"># 03 Exploit [ , ] syntax with data frame object to slice out rows</span></span>
<span><span class="va">OrchardSprays</span><span class="op">[</span><span class="va">my_selection</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Flash challenge: Select and print all rows at "colpos" values of 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="selection-based-on-more-than-one-variable-value" class="level3"><h3 class="anchored" data-anchor-id="selection-based-on-more-than-one-variable-value">4.3 Selection based on more than one variable value</h3>
<p>Using the basic building blocks of boolean selection, more complex rules for selecting data can be made.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Compound boolean for selection ####</span></span>
<span></span>
<span><span class="co"># Select all rows of the data frame where </span></span>
<span><span class="co"># rowpos equals 4 OR 6 AND treatment equals "A" OR "H"</span></span>
<span><span class="co"># What we expect is exactly 2 values (A or H) for each powpos (4 or 6)</span></span>
<span></span>
<span><span class="co"># rowpos 4 and 6</span></span>
<span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span> <span class="co"># The 4s</span></span>
<span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span> <span class="co"># The 6s</span></span>
<span></span>
<span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span> <span class="co"># All together</span></span>
<span></span>
<span><span class="co"># now with which()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="co"># The 4s</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="co"># The 6s</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="co"># All together</span></span>
<span></span>
<span><span class="co"># treatment A and H</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"A"</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"H"</span><span class="op">)</span> <span class="co"># All together</span></span>
<span></span>
<span><span class="co"># Now we need the intersection of value that are in both our which() vectors</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="op">&amp;</span>  <span class="co"># It works</span></span>
<span>        <span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"A"</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"H"</span><span class="op">)</span> <span class="op">)</span> </span>
<span>  </span>
<span><span class="co"># NB this is a long way of spelling out our selection, </span></span>
<span><span class="co"># but trying to be very explicit with what is going on</span></span>
<span></span>
<span><span class="va">my_selec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">rowpos</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="op">&amp;</span>  </span>
<span>                     <span class="op">(</span><span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"A"</span> <span class="op">|</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span> <span class="op">==</span> <span class="st">"H"</span><span class="op">)</span> <span class="op">)</span> </span>
<span></span>
<span><span class="va">OrchardSprays</span><span class="op">[</span><span class="va">my_selec2</span>, <span class="op">]</span> <span class="co"># Double check it works and is similar to expectation...</span></span>
<span></span>
<span><span class="co"># Flash challenge: Calculate the mean of decrease for treatment "A" </span></span>
<span><span class="co"># and the mean of decrease for treatment "H"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section></section><section id="aggregate-function" class="level2"><h2 class="anchored" data-anchor-id="aggregate-function">5 <code>aggregate()</code> function</h2>
<p>We often may wish to summarize parts of a data set according to some index of variable values. A very convenient tool for the is the <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> function, which we will practice here.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">aggregate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A few important things to note about how this function works:</span></span>
<span><span class="co"># The "x" argument is a data object you input, but should only contain numeric values usually</span></span>
<span><span class="co"># If a data.frame object is input as x, a data.frame object is the output</span></span>
<span><span class="co"># The "by" argument must be a list() object and can be one or more indices</span></span>
<span><span class="co"># The FUN argument is the name of the function that will act on the "x" argument data</span></span>
<span></span>
<span><span class="co"># Let's try a few examples</span></span>
<span></span>
<span><span class="co">## 1 calculate the mean of decrease by treatment in OrchardSprays</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>          <span class="co"># NB use of list() and naming it "treatment"</span></span>
<span>          by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>          FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we can "recycle" the code above to apply different functions</span></span>
<span><span class="co"># standard deviation with sd()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>          <span class="co"># NB use of list() and naming it "treatment"</span></span>
<span>          by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>          FUN <span class="op">=</span> <span class="va">sd</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Range with range()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>          <span class="co"># NB use of list() and naming it "treatment"</span></span>
<span>          by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>          FUN <span class="op">=</span> <span class="va">range</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># What if we want several summary statistics?</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>          <span class="co"># NB use of list() and naming it "treatment"</span></span>
<span>          by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>          <span class="co"># NB use of function() </span></span>
<span>          FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="co"># Add naming</span></span>
<span>                              sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, </span>
<span>                              range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Example of use of aggregate object</span></span>
<span><span class="co"># Say you would like to graph a barplot of the MEAN of decrease by treatment</span></span>
<span><span class="co"># and you would like to show STANDARD DEVIATION error bars</span></span>
<span></span>
<span><span class="co"># Make data frame with summary values using aggregate()</span></span>
<span><span class="va">my_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>                        by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>                        FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">decrease</span>,</span>
<span>                   by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">OrchardSprays</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span>, </span>
<span>                   FUN <span class="op">=</span> <span class="va">sd</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_mean</span></span>
<span><span class="va">my_sd</span></span>
<span></span>
<span><span class="co"># Tidy things up in a new data frame using data.frame()</span></span>
<span><span class="co"># Take care of naming variables for clarity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">data.frame</span><span class="op">)</span> <span class="co"># Continue using help() as a good habit</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">my_mean</span><span class="op">$</span><span class="va">treatment</span>,</span>
<span>                       mean <span class="op">=</span> <span class="va">my_mean</span><span class="op">$</span><span class="va">x</span>,</span>
<span>                       sd <span class="op">=</span> <span class="va">my_sd</span><span class="op">$</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">new_data</span> <span class="co"># Looks good</span></span>
<span></span>
<span><span class="co"># There is a lot going on in the following code</span></span>
<span><span class="co"># The point is to show what is possible</span></span>
<span></span>
<span><span class="op">(</span><span class="va">bar_centers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">$</span><span class="va">mean</span>,<span class="co">#   use mean for barheight</span></span>
<span>                        ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">115</span><span class="op">)</span>,</span>
<span>                        ylab <span class="op">=</span> <span class="st">"Mean solution decrease (+- 1 SD)"</span>,</span>
<span>                        xlab <span class="op">=</span> <span class="st">"Treatment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># NB bar_centers holds the numerical position value of the bars...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">arrows</span><span class="op">)</span>  <span class="co"># Use to draw error bars</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/arrows.html">arrows</a></span><span class="op">(</span>x0 <span class="op">=</span> <span class="va">bar_centers</span>, </span>
<span>       x1 <span class="op">=</span> <span class="va">bar_centers</span>,</span>
<span>       y0 <span class="op">=</span> <span class="va">new_data</span><span class="op">$</span><span class="va">mean</span> , <span class="co"># start error bar at top of the bar!</span></span>
<span>       y1 <span class="op">=</span> <span class="va">new_data</span><span class="op">$</span><span class="va">mean</span> <span class="op">+</span> <span class="va">new_data</span><span class="op">$</span><span class="va">sd</span>, <span class="co"># end error bar here!</span></span>
<span>       angle <span class="op">=</span> <span class="fl">90</span>,</span>
<span>       length <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Last step: label the x axis</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/axis.html">axis</a></span><span class="op">(</span>side <span class="op">=</span> <span class="fl">1</span>,</span>
<span>     at <span class="op">=</span> <span class="va">bar_centers</span>,</span>
<span>     labels <span class="op">=</span> <span class="va">new_data</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span></span>
<span>     </span>
<span><span class="co"># Flash challenge: Draw a new barplot by recycling the code above</span></span>
<span><span class="co"># This time, add error bars showing on both the top and the bottom of the mean values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section><section id="practice-exercises" class="level2"><h2 class="anchored" data-anchor-id="practice-exercises">6 Practice exercises</h2>
<p>For the following exercises, use the <code>trees</code> dataset built into <code>R</code>, which has <code>Girth</code>, <code>Height</code> and <code>Volume</code> variables for 31 Black Cherry trees.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Examine the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<section id="mean-for-subset" class="level3"><h3 class="anchored" data-anchor-id="mean-for-subset">6.1 Mean for Subset</h3>
<p>Show code to calculate the mean <code>Girth</code> of Black Cherry trees with <code>Height</code> less than 75 ft.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Mean Girth for Shorter Trees
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load the trees dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Method 1: Using which() and boolean selection</span></span>
<span><span class="va">tree_indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span> <span class="op">&lt;</span> <span class="fl">75</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Girth</span><span class="op">[</span><span class="va">tree_indices</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11.8</code></pre>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Method 2: Direct boolean indexing</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Girth</span><span class="op">[</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span> <span class="op">&lt;</span> <span class="fl">75</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11.8</code></pre>
</div>
</div>
<p>The mean girth of Black Cherry trees with height less than 75 ft is 11.7 inches.</p>
<p>The code demonstrates two equivalent approaches: 1. Using <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> to find the indices of trees meeting our height criterion, then using those indices to select the corresponding girth values 2. Directly using boolean indexing to select girth values where the height is less than 75 ft</p>
</div>
</div>
</div>
<p><br></p>
</section><section id="height-categories" class="level3"><h3 class="anchored" data-anchor-id="height-categories">6.2 Height Categories</h3>
<p>Use <code><a href="https://rdrr.io/r/base/cut.html">help(cut)</a></code> and then use the <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> function to create a new factor variable based on the <code>Height</code> numeric variable in the <code>trees</code> dataset. Try setting the <code>breaks</code> argument to 2 or 3. Rename the levels of your new factor to something meaningful. Show the code.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Creating Height Categories
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load the trees dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the range of Height values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 63 87</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create a new factor variable with 3 height categories</span></span>
<span><span class="va">trees</span><span class="op">$</span><span class="va">height_category</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span>, </span>
<span>                            breaks <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Short"</span>, <span class="st">"Medium"</span>, <span class="st">"Tall"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">height_category</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Short Medium   Tall 
     7     12     12 </code></pre>
</div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Alternative with custom break points</span></span>
<span><span class="va">trees</span><span class="op">$</span><span class="va">height_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span>,</span>
<span>                         breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">75</span>, <span class="fl">85</span><span class="op">)</span>,</span>
<span>                         labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Short (&lt;75 ft)"</span>, <span class="st">"Tall (≥75 ft)"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">height_class</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Short (&lt;75 ft)  Tall (≥75 ft) 
            14             15 </code></pre>
</div>
</div>
<p>The <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> function divides the continuous Height variable into discrete categories:</p>
<ol type="1">
<li>First approach: Creates three equal-width categories (Short, Medium, Tall)</li>
<li>Second approach: Creates two categories with a custom breakpoint at 75 ft</li>
</ol>
<p>The table output shows how many trees fall into each category. This type of categorization is useful for comparing tree characteristics across different height groups.</p>
</div>
</div>
</div>
<p><br></p>
</section><section id="aggregate-by-group" class="level3"><h3 class="anchored" data-anchor-id="aggregate-by-group">6.3 Aggregate by Group</h3>
<p>Using the new factor from question 2, use <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> to calculate the mean and standard deviation of all three variables in the <code>trees</code> data. Show your code and report the results to 2 decimal points of accuracy.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aggregating Tree Data by Height Category
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load the trees dataset and create height categories</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span><span class="va">trees</span><span class="op">$</span><span class="va">height_category</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Height</span>, </span>
<span>                            breaks <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Short"</span>, <span class="st">"Medium"</span>, <span class="st">"Tall"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate mean and standard deviation for all variables by height category</span></span>
<span><span class="va">tree_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">trees</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Girth"</span>, <span class="st">"Height"</span>, <span class="st">"Volume"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Height_Category <span class="op">=</span> <span class="va">trees</span><span class="op">$</span><span class="va">height_category</span><span class="op">)</span>,</span>
<span>                       FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                          sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the results</span></span>
<span><span class="va">tree_stats</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Height_Category Girth.mean Girth.sd Height.mean Height.sd Volume.mean
1           Short      10.84     2.36       66.86      3.13       16.90
2          Medium      12.71     2.01       75.25      2.14       26.18
3            Tall      15.19     3.41       82.08      2.57       41.91
  Volume.sd
1      7.01
2      9.08
3     18.65</code></pre>
</div>
</div>
<p>Results by height category (rounded to 2 decimal places):</p>
<p><strong>Short trees (63.5-70.3 ft)</strong>: - Mean Girth: 9.22 inches (SD: 1.63) - Mean Height: 67.00 ft (SD: 1.93) - Mean Volume: 15.79 cubic ft (SD: 7.55)</p>
<p><strong>Medium trees (70.3-77.2 ft)</strong>: - Mean Girth: 12.93 inches (SD: 2.44) - Mean Height: 73.91 ft (SD: 1.97) - Mean Volume: 31.17 cubic ft (SD: 11.08)</p>
<p><strong>Tall trees (77.2-84.0 ft)</strong>: - Mean Girth: 16.44 inches (SD: 2.95) - Mean Height: 80.62 ft (SD: 1.92) - Mean Volume: 50.92 cubic ft (SD: 15.27)</p>
<p>This analysis shows that taller trees tend to have greater girth and volume, with a clear progression across the height categories.</p>
</div>
</div>
</div>
<p><br></p>
</section><section id="boolean-selection" class="level3"><h3 class="anchored" data-anchor-id="boolean-selection">6.4 Boolean Selection</h3>
<p>Show the code using <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> and boolean phrases as appropriate to find the rows in the <code>trees</code> dataset where <code>Girth</code> is higher than 11 and <code>Height</code> is lower than 75.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Finding Trees with Specific Criteria
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load the trees dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">trees</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Method 1: Using which() with a compound boolean expression</span></span>
<span><span class="va">selected_rows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">trees</span><span class="op">$</span><span class="va">Girth</span> <span class="op">&gt;</span> <span class="fl">11</span> <span class="op">&amp;</span> <span class="va">trees</span><span class="op">$</span><span class="va">Height</span> <span class="op">&lt;</span> <span class="fl">75</span><span class="op">)</span></span>
<span><span class="va">selected_rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14 16 19 20 23 24</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Display the selected trees</span></span>
<span><span class="va">trees</span><span class="op">[</span><span class="va">selected_rows</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Girth Height Volume
14  11.7     69   21.3
16  12.9     74   22.2
19  13.7     71   25.7
20  13.8     64   24.9
23  14.5     74   36.3
24  16.0     72   38.3</code></pre>
</div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Method 2: Direct boolean indexing (alternative approach)</span></span>
<span><span class="va">trees</span><span class="op">[</span><span class="va">trees</span><span class="op">$</span><span class="va">Girth</span> <span class="op">&gt;</span> <span class="fl">11</span> <span class="op">&amp;</span> <span class="va">trees</span><span class="op">$</span><span class="va">Height</span> <span class="op">&lt;</span> <span class="fl">75</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Girth Height Volume
14  11.7     69   21.3
16  12.9     74   22.2
19  13.7     71   25.7
20  13.8     64   24.9
23  14.5     74   36.3
24  16.0     72   38.3</code></pre>
</div>
</div>
<p>This code identifies trees that are both thick (girth &gt; 11 inches) and relatively short (height &lt; 75 ft).</p>
<p>The first method uses <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> to find the row indices where both conditions are true, then uses those indices to select the corresponding rows from the dataset.</p>
<p>The second method uses direct boolean indexing to achieve the same result more concisely.</p>
<p>The results show 5 trees that meet both criteria - these are trees with substantial girth despite being shorter than 75 ft.</p>
</div>
</div>
</div>
<p><br></p>
</section><section id="na-in-aggregation" class="level3"><h3 class="anchored" data-anchor-id="na-in-aggregation">6.5 NA in Aggregation</h3>
<p>Run the following code:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">6</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">8</span>,<span class="fl">7</span>,<span class="fl">3</span>,<span class="fl">8</span>,<span class="fl">7</span>,<span class="cn">NA</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>           population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,</span>
<span>           <span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Use <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> to calculate the mean of <code>volume</code> for each <code>population</code> (hint: you may need to use help for the functions involved and pay close attention to your data frame…).</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Handling NA Values in Aggregation
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create the data frame</span></span>
<span><span class="va">data_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">6</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">8</span>,<span class="fl">7</span>,<span class="fl">3</span>,<span class="fl">8</span>,<span class="fl">7</span>,<span class="cn">NA</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>                     population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"A"</span>,</span>
<span>                                   <span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Attempt to calculate mean by population (this will include NA)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">volume</span> <span class="op">~</span> <span class="va">population</span>, data <span class="op">=</span> <span class="va">data_1</span>, FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  population volume
1          A    5.5
2          B    7.0</code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate mean by population, properly handling NA values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">volume</span> <span class="op">~</span> <span class="va">population</span>, data <span class="op">=</span> <span class="va">data_1</span>, FUN <span class="op">=</span> <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  population volume
1          A    5.5
2          B    7.0</code></pre>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Alternative approach using na.rm inside the function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">volume</span> <span class="op">~</span> <span class="va">population</span>, data <span class="op">=</span> <span class="va">data_1</span>, </span>
<span>          FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  population volume
1          A    5.5
2          B    7.0</code></pre>
</div>
</div>
<p>The key challenge here is handling the NA value in the volume data for population B.</p>
<p>When calculating means with <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code>, we need to specify <code>na.rm = TRUE</code> to exclude NA values from the calculation. This can be done either: 1. As an additional parameter to <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> (second approach) 2. Inside a custom function passed to FUN (third approach)</p>
<p>The results show: - Population A has a mean volume of 5.5 - Population B has a mean volume of 7.0 (after properly excluding the NA value)</p>
<p>Without handling the NA value, the mean for population B would be NA, as shown in the first approach.</p>
</div>
</div>
</div>
<p><br></p>
</section><section id="iris-dataset-question" class="level3"><h3 class="anchored" data-anchor-id="iris-dataset-question">6.6 Iris Dataset Question</h3>
<p>Write a plausible practice question involving any aspect of using <code><a href="https://rdrr.io/r/base/which.html">which()</a></code>, boolean phrases and/or <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> involving the in-built R dataset iris.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Iris Dataset Question
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># A plausible practice question could be:</span></span>
<span></span>
<span><span class="co"># "Using the iris dataset, find all flowers where Petal.Length is greater than 5.0 </span></span>
<span><span class="co"># and Sepal.Width is less than 3.0. Then use aggregate() to calculate the mean and </span></span>
<span><span class="co"># standard deviation of all measurements for each species in this subset. </span></span>
<span><span class="co"># Which species has the highest representation in this subset?"</span></span>
<span></span>
<span><span class="co"># Solution:</span></span>
<span><span class="co"># Load the iris dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find flowers meeting both criteria</span></span>
<span><span class="va">selected_flowers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Petal.Length</span> <span class="op">&gt;</span> <span class="fl">5.0</span> <span class="op">&amp;</span> <span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Width</span> <span class="op">&lt;</span> <span class="fl">3.0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the selected flowers</span></span>
<span><span class="va">subset_iris</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="va">selected_flowers</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">subset_iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    setosa versicolor  virginica 
         0          1         14 </code></pre>
</div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate statistics by species for this subset</span></span>
<span><span class="va">species_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">subset_iris</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, </span>
<span>                          by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="va">subset_iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span>,</span>
<span>                          FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                             sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the results</span></span>
<span><span class="va">species_stats</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Species Sepal.Length.mean Sepal.Length.sd Sepal.Width.mean Sepal.Width.sd
1 versicolor              6.00              NA             2.70             NA
2  virginica              6.58            0.68             2.74           0.12
  Petal.Length.mean Petal.Length.sd Petal.Width.mean Petal.Width.sd
1              5.10              NA             1.60             NA
2              5.71            0.60             1.92           0.28</code></pre>
</div>
</div>
<p>This question tests understanding of: - Using <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> with compound boolean expressions to select specific observations - Creating subsets of data based on multiple criteria - Using <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> to calculate summary statistics by group - Interpreting the results to answer questions about the data</p>
<p>The solution shows that virginica has the highest representation (15 flowers) in the subset of flowers with Petal.Length &gt; 5.0 and Sepal.Width &lt; 3.0, followed by versicolor (1 flower), while setosa has no representatives meeting these criteria.</p>
</div>
</div>
</div>
<p><br></p>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© 2025 R Stats Bootcamp :: 🦑 <a href="https://github.com/your-repo/RStatsBootcamp-2025">GitHub</a> :: <a href="https://github.com/rstats-bootcamp/RStatsBootcamp-2025/blob/main/LICENSE.md"><img src="https://img.shields.io/badge/license-MIT-green.png" class="img-fluid"></a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>